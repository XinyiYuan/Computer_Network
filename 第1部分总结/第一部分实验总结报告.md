# 计网 第一部分实验总结报告

## 02-mininet

### 实验过程

1. 互联网协议实验

   （1）搭建实验环境：安装wireshark，搭建mininet实验环境，连接互联网，配置dns

   （2）使用wget获取根页面www.baidu.com

   （3）观察wireshark的输出

2. 流完成时间实验

   （1）编写脚本fct_exp.py

   （2）在结点 `h2` 分配一个数据包空间，并在结点 `h1` 进行抓包，统计传输时间

   （3）修改数据包大小、延迟和带宽等参数，再次统计传输时间

   （4）处理分析实验数据

### 实验心得

1. 深入理解DNS协议、TCP协议、HTTP协议、ARP协议的功能。
2. 作图分析了不同带宽对传输文件所需要的时间的影响，了解了TCP协议中的慢启动和拥塞避免机制。

### 与理论课的联系

理解网络协议的功能和协作。

## 03-socket

### 实验过程

使用C语言实现HTTP服务器和HTTP客户端，具体要求包括：

1. 服务器监听80端口，收到请求并做出回答

2. 支持HTTP Get方法

3. 支持连续多次获取文件

4. 支持多个客户端获取文件

5. 支持请求不存在的文件

### 实验心得

HTTP报文是用于HTTP协议交互的信息。因为HTTP通信过程包括客户端往服务器端发送请求以及服务器端给客户端返回响应两个过程，所以会产生相应的请求报文和响应报文。本次实验中需要具体了解这两种报文的格式。

一开始用SimpleHTTPServer测试自己写的client时一直出错，但是用自己写的server运行时却正常，因此判断可能是自己的写法不够规范。通过wireshark抓包可以对比运行SimpleHTTPServer和自己的server时的区别，从而确定问题所在。

### 与理论课的联系

了解了HTTP协议发挥作用的场合和具体的工作方式

学习了HTTP报文

## 04-broadcast

### 实验过程

1. 实现结点广播 `broadcast_packet` 函数。
2. 使用 `three_nodes_bw.py` 验证三个节点相互能够ping通。
3. 用 `iperf` 测量广播网络的效率。
4. 构建环形拓扑结构，复现广播风暴现象。

### 实验心得

实现了广播函数

掌握了广播结点的工作原理

### 与理论课的联系

加深对直连网络的理解，了解“广播风暴”这一概念

为交换网络和生成树协议进行铺垫

## 05-switching

### 实验过程

为了提高效率，交换机在转发数据包的时候，会将数据包沿目的主机的方向转发。

为了让交换机结点确定该往什么方向转发，我们构建了一个交换机转发表。简单来说，就是在转发表中存储目的地址和转出端口的对应关系，等到需要转发的时候进行查表，即可知道该向什么方向转发数据包。

构建转发表的三个关键步骤是查询，插入和老化。

查询：收到数据包时，根据目的MAC地址查询转发表，如果查询到则从该端口转发，否则进行广播。

插入：收到数据包时，可以获得收到该数据包的端口和数据包的源MAC地址，更新转发表中的条目。

老化：删除30s内未访问的条目，保持转发表简洁，提高查表的效率。

实现后用iperf测量性能，和广播网络进行比较。

### 实验心得

转发表存储目的地址和转发端口的映射关系，老化时间来保证条目的有效性，可以大幅度提高发包的效率。

### 与理论课的联系

加深了对交换网络的理解

## 06-stp

### 实验过程

1. 补全已有代码，实现生成唯一的、优先级最高的生成树的算法。该算法对于 `four_node_ring.py` 和自己构建的不少于七个结点的拓扑结构，可以输出最小生成树拓扑。
2. 在 `four_node_ring.py` 的基础上添加两个主机结点，运行完生成树程序后这两个主机结点可以 `ping` 通。
3. 调研标准生成树协议，考虑如何应对复杂情况和如何提高效率。

### 实验心得

生成树的理论比较复杂，在写代码前需要对整个结构有较为清楚的认识，减少debug的时间。

### 与理论课的联系

理解简单版本的生成树协议，并且了解实际应用中的生成树协议时如何提高效率和稳定性的方法。

## 遇到的问题



## 对实验设置的建议